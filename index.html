<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AM ENTERPRISES - CCTV & Electrical Works</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the message box to replace alert/confirm */
        .message-box-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .message-box-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); /* shadow-xl */
            text-align: center;
            max-width: 90%;
            width: 400px;
        }
        .message-box-content button {
            margin-top: 1rem;
            padding: 0.5rem 1.5rem;
            background-color: #3B82F6; /* blue-500 */
            color: white;
            border-radius: 0.5rem; /* rounded-lg */
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .message-box-content button:hover {
            background-color: #2563EB; /* blue-600 */
        }

        /* --- Custom Texture/Pattern Styles --- */
        .textured-bg-blue {
            background-color: #F0F9FF; /* Light blue base */
            background-image: linear-gradient(45deg, rgba(219, 237, 255, 0.4) 25%, transparent 25%, transparent 75%, rgba(219, 237, 255, 0.4) 75%, rgba(219, 237, 255, 0.4)),
                              linear-gradient(-45deg, rgba(219, 237, 255, 0.4) 25%, transparent 25%, transparent 75%, rgba(219, 237, 255, 0.4) 75%, rgba(219, 237, 255, 0.4));
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }

        .textured-bg-gray {
            background-color: #F9FAFB; /* Light gray base */
            background-image: radial-gradient(circle, rgba(230, 230, 230, 0.3) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .section-separator {
            border-bottom: 2px dashed rgba(59, 130, 246, 0.3); /* blue-500 with transparency */
            margin-top: 2rem;
            margin-bottom: 2rem;
        }

        /* Star rating CSS */
        .stars {
            display: inline-block;
            font-size: 1.5rem; /* Adjust size as needed */
            color: #ccc; /* Default grey for empty stars */
            direction: rtl; /* For right-to-left display of stars */
        }
        .stars .star {
            display: inline-block;
            margin-right: 2px;
        }
        .stars input[type="radio"] {
            display: none;
        }
        .stars label {
            cursor: pointer;
            padding: 0 2px;
        }
        .stars label:before {
            content: '★';
        }
        .stars input[type="radio"]:checked ~ label:before {
            color: #FFD700; /* Gold color for selected stars */
        }
        .stars label:hover ~ label:before,
        .stars label:hover:before {
            color: #FFD700; /* Gold color on hover */
        }
        .stars.display-only {
            direction: ltr; /* For left-to-right display of stars in reviews list */
        }
        .stars.display-only .star {
            cursor: default;
        }
        .stars.display-only label {
            cursor: default;
        }
        /* Corrected rule for displaying filled stars */
        .stars.display-only .star.filled {
            color: #FFD700; /* Gold for filled stars in display */
        }
        .email-checkmark {
            color: #10B981; /* Green-500 */
            margin-left: 0.5rem;
            font-size: 1rem;
        }
    </style>
</head>
<body class="font-[Inter] bg-gray-100 text-gray-800">
    <div id="message-box-container"></div>

    <header class="bg-blue-600 text-white shadow-lg">
        <nav class="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <div class="logo text-3xl font-bold mb-4 md:mb-0">AM ENTERPRISES</div>
            <ul class="flex flex-wrap justify-center space-x-4 md:space-x-6">
                <li><a href="#home" class="hover:text-blue-200 transition duration-300 ease-in-out">Home</a></li>
                <li><a href="#services" class="hover:text-blue-200 transition duration-300 ease-in-out">Services</a></li>
                <li><a href="#products" class="hover:text-blue-200 transition duration-300 ease-in-out">Products</a></li>
                <li><a href="#gallery" class="hover:text-blue-200 transition duration-300 ease-in-out">Gallery</a></li>
                <li><a href="#contact" class="hover:text-blue-200 transition duration-300 ease-in-out">Contact Us</a></li>
                <li><a href="#customer-reviews" class="hover:text-blue-200 transition duration-300 ease-in-out">Reviews</a></li>
            </ul>
        </nav>
        <div class="hero bg-blue-700 text-white py-20 text-center">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-4 leading-tight">Your Trusted Partner for Security & Electrical Solutions</h1>
            <p class="text-xl md:text-2xl mb-8">Providing top-notch CCTV Cameras and expert Electrical Repairs.</p>
            <a href="#contact" class="btn bg-white text-blue-700 px-8 py-3 rounded-full text-lg font-semibold hover:bg-blue-100 transition duration-300 ease-in-out shadow-lg">Get a Quote</a>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <section id="home" class="about-us bg-white p-8 rounded-xl shadow-md mb-8 textured-bg-gray">
            <h2 class="text-3xl font-bold text-blue-700 mb-4 text-center">About AM ENTERPRISES</h2>
            <p class="text-lg leading-relaxed mb-4">Welcome to AM ENTERPRISES, your one-stop solution for all your security and electrical needs. We specialize in providing high-quality CCTV cameras and comprehensive repair services for all types of electrical works, ensuring safety and efficiency for your home or business.</p>
            <p class="text-lg leading-relaxed">With years of experience, our skilled technicians are committed to delivering reliable services and cutting-edge products tailored to your specific requirements.</p>
        </section>

        <hr class="section-separator">

        <section id="services" class="services bg-white p-8 rounded-xl shadow-md mb-8 textured-bg-blue">
            <h2 class="text-3xl font-bold text-blue-700 mb-6 text-center">Our Services</h2>
            <div class="service-grid grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="service-item bg-blue-50 p-6 rounded-lg shadow-sm border border-blue-200">
                    <h3 class="text-2xl font-semibold text-blue-800 mb-3">CCTV Camera Installation & Sales</h3>
                    <p class="text-base leading-relaxed mb-4">We offer a wide range of CCTV cameras, from basic home security systems to advanced commercial surveillance solutions. Our team handles professional installation, configuration, and maintenance.</p>
                    <ul class="list-disc list-inside text-gray-700">
                        <li>IP Cameras</li>
                        <li>Analog Cameras</li>
                        <li>DVR/NVR Systems</li>
                        <li>Wireless Security Systems</li>
                    </ul>
                </div>
                <div class="service-item bg-blue-50 p-6 rounded-lg shadow-sm border border-blue-200">
                    <h3 class="text-2xl font-semibold text-blue-800 mb-3">Electrical Works & Repairs</h3>
                    <p class="text-base leading-relaxed mb-4">Our expert electricians are equipped to handle all kinds of electrical issues, from minor repairs to major installations. We ensure safe and compliant electrical solutions.</p>
                    <ul class="list-disc list-inside text-gray-700">
                        <li>Wiring & Rewiring</li>
                        <li>Panel Upgrades</li>
                        <li>Fault Finding & Repair</li>
                        <li>Lighting Solutions</li>
                        <li>Appliance Repair</li>
                    </ul>
                </div>
            </div>
        </section>

        <hr class="section-separator">

        

        <hr class="section-separator">

        <hr class="section-separator">

        <section id="contact" class="contact bg-white p-8 rounded-xl shadow-md mb-8 textured-bg-gray">
            <h2 class="text-3xl font-bold text-blue-700 mb-6 text-center">Contact Us</h2>
            <p class="text-lg leading-relaxed mb-6 text-center">Have a question or need a service? Reach out to us!</p>
            <form id="contactForm" class="max-w-xl mx-auto">
                <div class="form-group mb-4">
                    <label for="name" class="block text-gray-700 text-sm font-bold mb-2">Name:</label>
                    <input type="text" id="name" name="name" required
                           class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                </div>
                <div class="form-group mb-4">
                    <label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email:</label>
                    <input type="email" id="email" name="email" required
                           class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                </div>
                <div class="form-group mb-4">
                    <label for="phone" class="block text-gray-700 text-sm font-bold mb-2">Phone (Optional):</label>
                    <input type="tel" id="phone" name="phone"
                           class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                </div>
                <div class="form-group mb-4">
                    <label for="service" class="block text-gray-700 text-sm font-bold mb-2">Interested Service:</label>
                    <select id="service" name="service"
                             class="shadow border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                        <option value="">Select a Service</option>
                        <option value="cctv_sales">CCTV Camera Sales</option>
                        <option value="cctv_installation">CCTV Installation</option>
                        <option value="electrical_repair">Electrical Repair</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group mb-6">
                    <label for="message" class="block text-gray-700 text-sm font-bold mb-2">Your Message:</label>
                    <textarea id="message" name="message" rows="5" required
                                  class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"></textarea>
                </div>
                <button type="submit" class="btn bg-blue-600 text-white px-6 py-3 rounded-lg text-lg font-semibold w-full hover:bg-blue-700 transition duration-300 ease-in-out shadow-md">Send Message</button>
                <div id="contactFormMessage" class="mt-4 text-center text-sm font-semibold"></div>
            </form>
            <div class="contact-info mt-8 text-center text-gray-700">
                <p class="mb-2"><strong>Address:</strong> BANKAT ROAD KAPSETHI BAZAR VARANASI</p>
                <p class="mb-2"><strong>Phone:</strong> +91 7068654372</p>
                <p class="mb-2"><strong>Email:</strong> amenterprises.varanasi@gmail.com</p>
                <p class="mb-2"><strong>Business Hours:</strong> Mon - Sat: 9:00 AM - 6:00 PM</p>
            </div>
        </section>

        <hr class="section-separator">

        <!-- Customer Reviews Section -->
        <section id="customer-reviews" class="customer-reviews bg-white p-8 rounded-xl shadow-md mb-8 textured-bg-blue">
            <h2 class="text-3xl font-bold text-blue-700 mb-6 text-center">Customer Reviews</h2>

            <!-- Review Submission Form -->
            <div class="max-w-xl mx-auto mb-8 p-6 bg-blue-50 rounded-lg shadow-sm border border-blue-200">
                <h3 class="text-2xl font-semibold text-blue-800 mb-4 text-center">Leave a Review</h3>
                <form id="reviewForm">
                    <div class="form-group mb-4">
                        <label for="reviewerName" class="block text-gray-700 text-sm font-bold mb-2">Your Name:</label>
                        <input type="text" id="reviewerName" name="reviewerName" required
                               class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                    </div>
                    <div class="form-group mb-4">
                        <label for="reviewerEmail" class="block text-gray-700 text-sm font-bold mb-2">Your Email:</label>
                        <input type="email" id="reviewerEmail" name="reviewerEmail" required
                               class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                    </div>
                    <div class="form-group mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Rating:</label>
                        <div class="stars" id="reviewStars">
                            <!-- Stars are rendered in reverse order for RTL CSS trick -->
                            <input type="radio" id="star5" name="rating" value="5" /><label for="star5" title="5 stars"></label>
                            <input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="4 stars"></label>
                            <input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="3 stars"></label>
                            <input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="2 stars"></label>
                            <input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="1 star"></label>
                        </div>
                    </div>
                    <div class="form-group mb-6">
                        <label for="reviewMessage" class="block text-gray-700 text-sm font-bold mb-2">Your Review:</label>
                        <textarea id="reviewMessage" name="reviewMessage" rows="4" required
                                  class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"></textarea>
                    </div>
                    <button type="submit" class="btn bg-blue-600 text-white px-6 py-3 rounded-lg text-lg font-semibold w-full hover:bg-blue-700 transition duration-300 ease-in-out shadow-md">Submit Review</button>
                    <div id="reviewFormMessage" class="mt-4 text-center text-sm font-semibold"></div>
                </form>
            </div>

            <!-- Display Existing Reviews -->
            <div id="reviewsList" class="space-y-6 max-w-2xl mx-auto">
                <p class="text-gray-500 text-center" id="noReviewsMessage">No reviews yet. Be the first to leave one!</p>
                <!-- Reviews will be loaded here by JavaScript -->
            </div>
        </section>

        <hr class="section-separator">

        <section id="admin-login" class="admin-login bg-white p-8 rounded-xl shadow-md mb-8 textured-bg-gray">
            <h2 class="text-3xl font-bold text-blue-700 mb-6 text-center">Admin Login</h2>
            <form id="adminLoginForm" class="max-w-md mx-auto">
                <div class="form-group mb-4">
                    <label for="adminUsername" class="block text-gray-700 text-sm font-bold mb-2">Username:</label>
                    <input type="text" id="adminUsername" name="adminUsername" required
                           class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                </div>
                <div class="form-group mb-6">
                    <label for="adminPassword" class="block text-gray-700 text-sm font-bold mb-2">Password:</label>
                    <input type="password" id="adminPassword" name="adminPassword" required
                           class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                </div>
                <button type="submit" class="btn bg-blue-600 text-white px-6 py-3 rounded-lg text-lg font-semibold w-full hover:bg-blue-700 transition duration-300 ease-in-out shadow-md">Login</button>
                <div id="adminLoginMessage" class="mt-4 text-center text-sm font-semibold"></div>
            </form>
        </section>

        <section id="admin-dashboard" class="admin-dashboard bg-white p-8 rounded-xl shadow-md mb-8 hidden textured-bg-gray">
            <h2 class="text-3xl font-bold text-blue-700 mb-6 text-center">Admin Dashboard</h2>
            <div class="flex justify-end mb-4">
                <button id="adminLogoutBtn" class="btn bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-red-700 transition duration-300 ease-in-out shadow-md">Logout</button>
            </div>
            <div id="inquiriesList" class="space-y-4">
                <p class="text-gray-500 text-center" id="noInquiriesMessage">No inquiries submitted yet.</p>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-6 text-center">
        <p>&copy; 2025 AM ENTERPRISES. All rights reserved.</p>
    </footer>

    <script>
        /**
         * Displays a custom message box instead of alert/confirm.
         * @param {string} message - The message to display.
         * @param {function} [onClose] - Callback function when the message box is closed.
         */
        function showMessageBox(message, onClose = () => {}) {
            const container = document.getElementById('message-box-container');
            container.innerHTML = `
                <div class="message-box-overlay">
                    <div class="message-box-content">
                        <p>${message}</p>
                        <button id="messageBoxCloseBtn">OK</button>
                    </div>
                </div>
            `;
            document.getElementById('messageBoxCloseBtn').onclick = () => {
                container.innerHTML = '';
                onClose();
            };
        }

        // --- Contact Form Submission Logic ---
        const contactForm = document.getElementById('contactForm');
        const contactFormMessage = document.getElementById('contactFormMessage');
        const contactPhoneNumber = "917068654372"; // Phone number for WhatsApp, without '+' for wa.me
        const recipientEmail = "amenterprises.varanasi@gmail.com"; // Email for contact

        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = new FormData(contactForm);
            const inquiry = {
                id: crypto.randomUUID(), // Generate a unique ID for each inquiry
                name: formData.get('name'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                service: formData.get('service'),
                message: formData.get('message'),
                timestamp: new Date().toISOString(), // ISO 8601 format
            };

            try {
                // Save to Local Storage for Admin Dashboard
                let inquiries = JSON.parse(localStorage.getItem('contactInquiries')) || [];
                inquiries.push(inquiry);
                localStorage.setItem('contactInquiries', JSON.stringify(inquiries));

                // Prepare content for email and WhatsApp
                const subject = `Inquiry from ${inquiry.name} (${inquiry.service})`;
                const body = `
Name: ${inquiry.name}
Email: ${inquiry.email}
Phone: ${inquiry.phone || 'N/A'}
Service: ${inquiry.service}
Message:
${inquiry.message}

---
Sent from AM ENTERPRISES website.
Timestamp: ${new Date(inquiry.timestamp).toLocaleString()}
                `.trim();

                const encodedSubject = encodeURIComponent(subject);
                const encodedBody = encodeURIComponent(body);
                const encodedWhatsAppMessage = encodeURIComponent(body); // WhatsApp message can be the same as email body

                // Construct the mailto link
                const mailtoLink = `mailto:${recipientEmail}?subject=${encodedSubject}&body=${encodedBody}`;
                // Construct the WhatsApp link
                const whatsappLink = `https://wa.me/${contactPhoneNumber}?text=${encodedWhatsAppMessage}`;

                showMessageBox(
                    `Thank you for your inquiry! We've saved your details.
                    <br><br>
                    To send this inquiry to us, please click one of the options below and then confirm in your app:
                    <br><br>
                    <a href="${mailtoLink}" target="_blank" class="text-blue-600 underline font-bold">Send via Email</a>
                    <br>
                    <a href="${whatsappLink}" target="_blank" class="text-green-600 underline font-bold">Send via WhatsApp</a>
                    `,
                    () => {
                        contactForm.reset();
                        contactFormMessage.textContent = "";
                        // If admin is logged in, refresh the inquiries list
                        if (document.getElementById('admin-dashboard').classList.contains('flex')) { // Check if dashboard is visible
                            loadInquiriesIntoAdminPanel();
                        }
                    }
                );
                contactFormMessage.classList.remove('text-red-500');
                contactFormMessage.classList.add('text-green-500');
                contactFormMessage.textContent = "Inquiry saved! Please check the pop-up for sending options.";

            } catch (error) {
                console.error("Error saving inquiry:", error);
                showMessageBox("Failed to save inquiry. Please try again later.");
                contactFormMessage.classList.remove('text-green-500');
                contactFormMessage.classList.add('text-red-500');
                contactFormMessage.textContent = "Failed to save inquiry.";
            }
        });

        // --- Admin Login & Dashboard Logic ---
        const adminLoginSection = document.getElementById('admin-login');
        const adminLoginForm = document.getElementById('adminLoginForm');
        const adminDashboardSection = document.getElementById('admin-dashboard');
        const adminLogoutBtn = document.getElementById('adminLogoutBtn');
        const adminLoginMessage = document.getElementById('adminLoginMessage');
        const inquiriesList = document.getElementById('inquiriesList');
        const noInquiriesMessage = document.getElementById('noInquiriesMessage');

        // Hardcoded admin credentials for client-side demo
        const ADMIN_USERNAME = 'admin';
        const ADMIN_PASSWORD = 'password123';
        const ADMIN_SESSION_KEY = 'isAdminLoggedIn'; // Key for local storage session

        /**
         * Checks if the admin is currently logged in based on local storage.
         * Shows/hides sections accordingly.
         */
        function checkAdminStatus() {
            const isLoggedIn = localStorage.getItem(ADMIN_SESSION_KEY) === 'true';
            if (isLoggedIn) {
                adminLoginSection.classList.add('hidden');
                adminDashboardSection.classList.remove('hidden');
                adminDashboardSection.classList.add('flex', 'flex-col'); // Ensure it's a flex container
                loadInquiriesIntoAdminPanel();
            } else {
                adminLoginSection.classList.remove('hidden');
                adminDashboardSection.classList.add('hidden');
                adminDashboardSection.classList.remove('flex', 'flex-col');
            }
        }

        /**
         * Handles admin login attempt.
         */
        adminLoginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;

            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                localStorage.setItem(ADMIN_SESSION_KEY, 'true');
                showMessageBox("Admin login successful!", () => {
                    adminLoginMessage.textContent = "";
                    adminLoginForm.reset();
                    checkAdminStatus();
                });
                adminLoginMessage.classList.remove('text-red-500');
                adminLoginMessage.classList.add('text-green-500');
                adminLoginMessage.textContent = "Login successful!";
            } else {
                showMessageBox("Invalid username or password.", () => {
                    adminLoginMessage.textContent = "";
                });
                adminLoginMessage.classList.remove('text-green-500');
                adminLoginMessage.classList.add('text-red-500');
                adminLoginMessage.textContent = "Invalid credentials!";
            }
        });

        /**
         * Handles admin logout.
         */
        adminLogoutBtn.addEventListener('click', () => {
            showMessageBox("Are you sure you want to log out?", () => {
                localStorage.removeItem(ADMIN_SESSION_KEY);
                checkAdminStatus();
                showMessageBox("Logged out successfully.");
            });
        });

        /**
         * Loads and displays inquiries from local storage in the admin panel.
         */
        function loadInquiriesIntoAdminPanel() {
            const inquiries = JSON.parse(localStorage.getItem('contactInquiries')) || [];
            inquiriesList.innerHTML = ''; // Clear previous inquiries

            if (inquiries.length === 0) {
                noInquiriesMessage.classList.remove('hidden');
                inquiriesList.appendChild(noInquiriesMessage);
            } else {
                noInquiriesMessage.classList.add('hidden');
                inquiries.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)); // Sort by newest first

                inquiries.forEach(inquiry => {
                    const inquiryDiv = document.createElement('div');
                    inquiryDiv.className = 'bg-blue-50 p-4 rounded-lg shadow-sm border border-blue-200';
                    inquiryDiv.innerHTML = `
                        <p class="text-md font-semibold text-blue-800">Inquiry from: ${inquiry.name}</p>
                        <p class="text-sm text-gray-700">Email: ${inquiry.email}</p>
                        <p class="text-sm text-gray-700">Phone: ${inquiry.phone || 'N/A'}</p>
                        <p class="text-sm text-gray-700">Service: ${inquiry.service}</p>
                        <p class="text-sm text-gray-700 mt-2">Message: ${inquiry.message}</p>
                        <p class="text-xs text-gray-500 mt-2">Received: ${new Date(inquiry.timestamp).toLocaleString()}</p>
                        <button data-id="${inquiry.id}" class="delete-inquiry-btn mt-3 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition duration-300 ease-in-out">Delete</button>
                    `;
                    inquiriesList.appendChild(inquiryDiv);
                });

                // Add event listeners for delete buttons
                document.querySelectorAll('.delete-inquiry-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const inquiryIdToDelete = e.target.dataset.id;
                        showMessageBox(`Are you sure you want to delete this inquiry from ${inquiries.find(i => i.id === inquiryIdToDelete)?.name || 'this user'}?`, () => {
                            deleteInquiry(inquiryIdToDelete);
                        });
                    });
                });
            }
        }

        /**
         * Deletes an inquiry from local storage.
         * @param {string} id - The ID of the inquiry to delete.
         */
        function deleteInquiry(id) {
            let inquiries = JSON.parse(localStorage.getItem('contactInquiries')) || [];
            inquiries = inquiries.filter(inquiry => inquiry.id !== id);
            localStorage.setItem('contactInquiries', JSON.stringify(inquiries));
            showMessageBox("Inquiry deleted successfully!");
            loadInquiriesIntoAdminPanel(); // Refresh the list
        }

        // --- Customer Review Logic ---
        const reviewForm = document.getElementById('reviewForm');
        const reviewFormMessage = document.getElementById('reviewFormMessage');
        const reviewsList = document.getElementById('reviewsList');
        const noReviewsMessage = document.getElementById('noReviewsMessage');

        /**
         * Basic email validation function.
         * @param {string} email - The email string to validate.
         * @returns {boolean} True if the email is valid, false otherwise.
         */
        function isValidEmail(email) {
            // A simple regex for email validation. More robust validation might be needed for production.
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        /**
         * Renders star icons based on a given rating.
         * @param {number} rating - The rating (1-5).
         * @returns {string} HTML string of star icons.
         */
        function renderStars(rating) {
            let starsHtml = '';
            // Loop from 1 to 5 for LTR display of stars in reviews list
            for (let i = 1; i <= 5; i++) {
                starsHtml += `<span class="star ${i <= rating ? 'filled' : ''}">★</span>`;
            }
            return starsHtml;
        }

        /**
         * Loads and displays customer reviews from local storage.
         */
        function loadReviews() {
            const reviews = JSON.parse(localStorage.getItem('customerReviews')) || [];
            reviewsList.innerHTML = ''; // Clear previous reviews

            if (reviews.length === 0) {
                noReviewsMessage.classList.remove('hidden');
                reviewsList.appendChild(noReviewsMessage);
            } else {
                noReviewsMessage.classList.add('hidden');
                // Sort reviews by newest first
                reviews.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

                reviews.forEach(review => {
                    const emailCheckmarkHtml = review.email && isValidEmail(review.email) ?
                                               `<span class="email-checkmark">✔</span>` : '';
                    const reviewDiv = document.createElement('div');
                    reviewDiv.className = 'bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200';
                    reviewDiv.innerHTML = `
                        <div class="flex items-center mb-2">
                            <p class="text-lg font-semibold text-gray-800 mr-3">${review.name}</p>
                            ${review.email ? `<p class="text-sm text-gray-600 mr-1">(${review.email})</p>${emailCheckmarkHtml}` : ''}
                            <div class="stars display-only ml-auto">${renderStars(review.rating)}</div>
                        </div>
                        <p class="text-gray-700 leading-relaxed mb-3">${review.message}</p>
                        <p class="text-xs text-gray-500">Reviewed on: ${new Date(review.timestamp).toLocaleString()}</p>
                    `;
                    reviewsList.appendChild(reviewDiv);
                });
            }
        }

        /**
         * Handles review form submission.
         */
        reviewForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const formData = new FormData(reviewForm);
            const reviewerName = formData.get('reviewerName');
            const reviewerEmail = formData.get('reviewerEmail'); // Get the email
            const reviewMessage = formData.get('reviewMessage');
            const rating = parseInt(formData.get('rating'));

            if (!reviewerName || !reviewerEmail || !reviewMessage || isNaN(rating) || rating < 1 || rating > 5) {
                showMessageBox("Please fill in all fields and select a rating (1-5 stars).");
                reviewFormMessage.classList.remove('text-green-500');
                reviewFormMessage.classList.add('text-red-500');
                reviewFormMessage.textContent = "Please fill in all fields and select a rating.";
                return;
            }

            const newReview = {
                id: crypto.randomUUID(),
                name: reviewerName,
                email: reviewerEmail, // Save the email
                message: reviewMessage,
                rating: rating,
                timestamp: new Date().toISOString(),
            };

            try {
                let reviews = JSON.parse(localStorage.getItem('customerReviews')) || [];
                reviews.push(newReview);
                localStorage.setItem('customerReviews', JSON.stringify(reviews));

                // Prepare content for email sharing
                const emailSubject = `Customer Review from ${newReview.name} (Rating: ${newReview.rating} stars)`;
                const emailBody = `
Reviewer Name: ${newReview.name}
Reviewer Email: ${newReview.email}
Rating: ${newReview.rating} out of 5 stars
Review:
${newReview.message}

---
Submitted on: ${new Date(newReview.timestamp).toLocaleString()}
                `.trim();
                const encodedEmailSubject = encodeURIComponent(emailSubject);
                const encodedEmailBody = encodeURIComponent(emailBody);
                const mailtoReviewLink = `mailto:?subject=${encodedEmailSubject}&body=${encodedEmailBody}`;


                showMessageBox(
                    `Thank you for your review! It has been saved.
                    <br><br>
                    <a href="${mailtoReviewLink}" target="_blank" class="text-blue-600 underline font-bold">Share Review via Email</a>
                    `,
                    () => {
                        reviewForm.reset();
                        // Reset star selection visually
                        document.querySelectorAll('#reviewStars input[type="radio"]').forEach(radio => radio.checked = false);
                        reviewFormMessage.textContent = "";
                        loadReviews(); // Refresh the displayed reviews
                    }
                );
                reviewFormMessage.classList.remove('text-red-500');
                reviewFormMessage.classList.add('text-green-500');
                reviewFormMessage.textContent = "Review submitted successfully!";

            } catch (error) {
                console.error("Error saving review:", error);
                showMessageBox("Failed to submit review. Please try again later.");
                reviewFormMessage.classList.remove('text-green-500');
                reviewFormMessage.classList.add('text-red-500');
                reviewFormMessage.textContent = "Failed to submit review.";
            }
        });

        // Initial checks on page load
        document.addEventListener('DOMContentLoaded', () => {
            checkAdminStatus();
            loadReviews(); // Load reviews when the page loads
        });
    </script>
</body>
</html>
